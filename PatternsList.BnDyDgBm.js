import{_ as e,f as t,d as a,p as l,g as s}from"./index.D0mN0E-X.js";import{F as i}from"./FloatingWindow.Sno5eSNt.js";import{r as n,c as r,o as u,a as o,w as v,I as c,b as d,e as m,f as h,h as p,F as f,l as g,j as x,q as y,s as _,n as b,u as H,t as I}from"./vendor.BQAVRTmg.js";const k=e({__name:"VirtualScroll",props:{items:{type:Array,required:!0},itemHeight:{type:Number,default:40},buffer:{type:Number,default:5},threshold:{type:Number,default:50}},setup(e,{expose:t}){const a=e,l=n(null),s=n(0),i=n(400),y=r(()=>a.items.length>a.threshold),_=r(()=>y.value?a.items.length*a.itemHeight:"auto"),b=r(()=>{if(!y.value)return 0;const e=Math.floor(s.value/a.itemHeight);return Math.max(0,e-a.buffer)}),H=r(()=>{if(!y.value)return a.items.length;const e=Math.ceil(i.value/a.itemHeight),t=b.value+e+2*a.buffer;return Math.min(a.items.length,t)}),I=r(()=>y.value?b.value*a.itemHeight:0),k=r(()=>y.value?a.items.slice(b.value,H.value).map((e,t)=>({data:e,_virtualIndex:b.value+t})):a.items.map((e,t)=>({data:e,_virtualIndex:t})));function w(e){s.value=e.target.scrollTop}function M(){l.value&&(i.value=l.value.clientHeight)}t({scrollToIndex:function(e){l.value&&y.value&&(l.value.scrollTop=e*a.itemHeight)}});let P=null;return u(()=>{M(),l.value&&"ResizeObserver"in window&&(P=new ResizeObserver(M),P.observe(l.value))}),o(()=>{P&&P.disconnect()}),v(()=>a.items.length,()=>{c(M)}),(t,a)=>(m(),d("div",{ref_key:"containerRef",ref:l,class:"virtual-scroll-container",onScroll:w},[h("div",{class:"virtual-scroll-phantom",style:p({height:_.value+"px"})},null,4),h("div",{class:"virtual-scroll-content",style:p({transform:`translateY(${I.value}px)`})},[(m(!0),d(f,null,g(k.value,a=>(m(),d("div",{key:a._virtualIndex,class:"virtual-scroll-item",style:p({minHeight:e.itemHeight+"px"})},[x(t.$slots,"default",{item:a.data,index:a._virtualIndex},void 0)],4))),128))],4)],544))}},[["__scopeId","data-v-db70467b"]]),w={class:"patterns-info"},M={class:"patterns-scroll-area"},P=["onClick"],j={class:"pattern-index"},C={class:"pattern-tiles"},F=["src","alt"],R={key:1,class:"empty-message"},T=e({__name:"PatternsList",setup(e){const{selectedPatterns:o,currentPatternIndex:p,setHandFromPattern:x}=t(),{togglePatternsList:T}=a(),L=n(null),N=n([]);u(()=>{N.value=[...o.value]});const S=r(()=>N.value),q=r(()=>N.value.length);return v(p,e=>{c(()=>{L.value&&L.value.scrollToIndex(Math.max(0,e-2))})}),(e,t)=>(m(),y(i,{visible:!0,title:"é¢˜ç›®åˆ—è¡¨",icon:"ğŸ“‹",theme:"purple","storage-key":"patternsList","default-width":280,"default-height":400,"min-width":220,"min-height":200,onClose:H(T)},{"header-extra":_(()=>[h("span",w,I(H(p)+1)+"/"+I(q.value),1)]),default:_(()=>[h("div",M,[S.value.length>0?(m(),y(k,{key:0,ref_key:"virtualScrollRef",ref:L,items:S.value,"item-height":44,buffer:5,threshold:50},{default:_(({item:e,index:t})=>[h("div",{class:b(["pattern-item",{active:t===H(p)}]),onClick:a=>function(e,t){x(e,t)}(e,t)},[h("span",j,I(t+1),1),h("div",C,[(m(!0),d(f,null,g(H(l)(e),(e,t)=>(m(),d("img",{key:t,src:H(s)(e),alt:e,class:"tile-image"},null,8,F))),128))])],10,P)]),_:1},8,["items"])):(m(),d("div",R,t[0]||(t[0]=[h("span",{class:"empty-icon"},"ğŸ“",-1),h("p",null,"è¯·åœ¨è®¾ç½®ä¸­å‹¾é€‰éš¾åº¦",-1)])))])]),_:1},8,["onClose"]))}},[["__scopeId","data-v-882bb016"]]);export{T as default};
